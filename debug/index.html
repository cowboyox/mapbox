<!DOCTYPE html>
<html>

<head>
    <title>Mapbox GL JS debug page</title>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel='stylesheet' href='../dist/mapbox-gl.css' />
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        html,
        body,
        #map {
            height: 100%;
        }
    </style>
</head>

<body>
    <div id='map'></div>
    <input id="rangetest" type="range" min="1" max="100" value="50" style="position: absolute; top: 0;">
    <input id="widthtest" type="range" min="1" max="200" value="50" style="position: absolute; top: 50px;">

    <script src='../dist/mapbox-gl-dev.js'></script>
    <script src='../debug/access_token_generated.js'></script>
    <script src="https://unpkg.com/geometric@2.3.5/build/geometric.min.js"></script>
    <script>

        var map = window.map = new mapboxgl.Map({
            container: 'map',
            zoom: 12.5,
            center: [-122.4194, 37.7749],
            //style: 'mapbox://styles/mapbox/streets-v11',
            hash: true,
            projection: 'globe'
        });

        map.on('load', () => {
            let inputPoints = [
                [
                    11.579246520996094,
                    48.10880666387664
                ],
                [
                    11.57632827758789,
                    48.11178673428214
                ],
                [
                    11.571006774902344,
                    48.11178673428214
                ],
                [
                    11.563453674316404,
                    48.113162093106766
                ],
                [
                    11.543712615966797,
                    48.111442888824136
                ],
                [
                    11.539936065673828,
                    48.1104113386456
                ],
                [
                    11.518478393554688,
                    48.11029672068093
                ],
                [
                    11.51641845703125,
                    48.11373514841913
                ],
                [
                    11.51968002319336,
                    48.124392812310205
                ],
                [
                    11.53238296508789,
                    48.133215226543605
                ],
                [
                    11.538734436035156,
                    48.175587508240994
                ],
                [
                    11.567230224609375,
                    48.17627433801811
                ],
                [
                    11.573410034179688,
                    48.17833477214548
                ],
                [
                    11.586112976074219,
                    48.17787690505101
                ],
                [
                    11.600189208984375,
                    48.17169529904533
                ],
                [
                    11.595726013183594,
                    48.164711477297736
                ],
                [
                    11.604652404785156,
                    48.157268653400116
                ],
                [
                    11.615638732910156,
                    48.151428143221224
                ],
                [
                    11.614952087402344,
                    48.136079320834966
                ],
                [
                    11.616668701171875,
                    48.13218411348939
                ],
                [
                    11.615638732910156,
                    48.12931980192306
                ],
                [
                    11.620616912841797,
                    48.12485115686402
                ],
                [
                    11.614093780517576,
                    48.12668449417932
                ],
                [
                    11.612720489501953,
                    48.120267527274464
                ],
                [
                    11.601734161376953,
                    48.115683488677305
                ],
                [
                    11.591434478759766,
                    48.11499584761038
                ],
                [
                    11.584739685058594,
                    48.114881239871174
                ],
                [
                    11.579246520996094,
                    48.10880666387664
                ]
            ];

            map.addSource(`area-iso`, {
                    'type': 'geojson',
                    'data': 
                    {
  "features": [
    {
      "properties": {
        "fill": "#bf4040",
        "fillOpacity": 0.33,
        "fill-opacity": 0.33,
        "fillColor": "#bf4040",
        "color": "#bf4040",
        "contour": 5000,
        "opacity": 0.33,
        "metric": "distance"
      },
      "geometry": {
        "coordinates": [
          [
            [11.561095, 48.224261],
            [11.560011, 48.224238],
            [11.559095, 48.223412],
            [11.556095, 48.223289],
            [11.555095, 48.222271],
            [11.554197, 48.222256],
            [11.554076, 48.223174],
            [11.554063, 48.222122],
            [11.554856, 48.221915],
            [11.554904, 48.220963],
            [11.555784, 48.220154],
            [11.555095, 48.219427],
            [11.554274, 48.220334],
            [11.550636, 48.220154],
            [11.550301, 48.219154],
            [11.551112, 48.219137],
            [11.551209, 48.220041],
            [11.55279, 48.21985],
            [11.552991, 48.218154],
            [11.551742, 48.217154],
            [11.55249, 48.21655],
            [11.552462, 48.215787],
            [11.55082, 48.215429],
            [11.550095, 48.214593],
            [11.548689, 48.214749],
            [11.547392, 48.216154],
            [11.547458, 48.217792],
            [11.548194, 48.218055],
            [11.548596, 48.219154],
            [11.548095, 48.219968],
            [11.547811, 48.218438],
            [11.546282, 48.218342],
            [11.546095, 48.21869],
            [11.543063, 48.217154],
            [11.542744, 48.215506],
            [11.540095, 48.215625],
            [11.53941, 48.215154],
            [11.540095, 48.214488],
            [11.541369, 48.214429],
            [11.54213, 48.213119],
            [11.541095, 48.212926],
            [11.540752, 48.213811],
            [11.540095, 48.214114],
            [11.536095, 48.213687],
            [11.534095, 48.215347],
            [11.532095, 48.213876],
            [11.530575, 48.215154],
            [11.528095, 48.214385],
            [11.527777, 48.213154],
            [11.528378, 48.212154],
            [11.527737, 48.211513],
            [11.527716, 48.210154],
            [11.528816, 48.208876],
            [11.530502, 48.208561],
            [11.530809, 48.206869],
            [11.532095, 48.2067],
            [11.533095, 48.205686],
            [11.535095, 48.205631],
            [11.535546, 48.205154],
            [11.532443, 48.201807],
            [11.530897, 48.201352],
            [11.529095, 48.199884],
            [11.526167, 48.200226],
            [11.525095, 48.201353],
            [11.521613, 48.200154],
            [11.520218, 48.199154],
            [11.522095, 48.196875],
            [11.519061, 48.195154],
            [11.519951, 48.19501],
            [11.520087, 48.194154],
            [11.51869, 48.19175],
            [11.521095, 48.19189],
            [11.521486, 48.190763],
            [11.519095, 48.190823],
            [11.518537, 48.191597],
            [11.516095, 48.19154],
            [11.514095, 48.192503],
            [11.511095, 48.192484],
            [11.509095, 48.193834],
            [11.50722, 48.194279],
            [11.507095, 48.194706],
            [11.506095, 48.194009],
            [11.506016, 48.193233],
            [11.504329, 48.193154],
            [11.507095, 48.192882],
            [11.508095, 48.192026],
            [11.512798, 48.191858],
            [11.513859, 48.190918],
            [11.516446, 48.190505],
            [11.516472, 48.189777],
            [11.51474, 48.188154],
            [11.514598, 48.186651],
            [11.513781, 48.185469],
            [11.512896, 48.185154],
            [11.51358, 48.184639],
            [11.513728, 48.183154],
            [11.514659, 48.182154],
            [11.513518, 48.181154],
            [11.513658, 48.180717],
            [11.514095, 48.180417],
            [11.516095, 48.180522],
            [11.517095, 48.181713],
            [11.51764, 48.181154],
            [11.517095, 48.180541],
            [11.516612, 48.180637],
            [11.516328, 48.179388],
            [11.517095, 48.179156],
            [11.518095, 48.179586],
            [11.520364, 48.179154],
            [11.518825, 48.178424],
            [11.517355, 48.178414],
            [11.517095, 48.179142],
            [11.516543, 48.178707],
            [11.516262, 48.178154],
            [11.517691, 48.177751],
            [11.517951, 48.17701],
            [11.519095, 48.176878],
            [11.519763, 48.176154],
            [11.518677, 48.174572],
            [11.516095, 48.174043],
            [11.519095, 48.17397],
            [11.519374, 48.174876],
            [11.520095, 48.174983],
            [11.520732, 48.174792],
            [11.521095, 48.173976],
            [11.521603, 48.174646],
            [11.523095, 48.175048],
            [11.52397, 48.174029],
            [11.525095, 48.173906],
            [11.5259, 48.17296],
            [11.527512, 48.172572],
            [11.528095, 48.169479],
            [11.528658, 48.171591],
            [11.529555, 48.171614],
            [11.531054, 48.170154],
            [11.531003, 48.169246],
            [11.530439, 48.169154],
            [11.531001, 48.16906],
            [11.53105, 48.168109],
            [11.531874, 48.167933],
            [11.53198, 48.16704],
            [11.533095, 48.166964],
            [11.533543, 48.167707],
            [11.535095, 48.167844],
            [11.536016, 48.166076],
            [11.536803, 48.165863],
            [11.536655, 48.164594],
            [11.534971, 48.164154],
            [11.535905, 48.163154],
            [11.53592, 48.162329],
            [11.535062, 48.162121],
            [11.537095, 48.160344],
            [11.537208, 48.161042],
            [11.538095, 48.161737],
            [11.542095, 48.161674],
            [11.543623, 48.162154],
            [11.542894, 48.163954],
            [11.540095, 48.16459],
            [11.538488, 48.166154],
            [11.540095, 48.172775],
            [11.542095, 48.172845],
            [11.544095, 48.174936],
            [11.547095, 48.174514],
            [11.548095, 48.175489],
            [11.552095, 48.175459],
            [11.552685, 48.173745],
            [11.553505, 48.173745],
            [11.554095, 48.174513],
            [11.555095, 48.173536],
            [11.555737, 48.175154],
            [11.556291, 48.17535],
            [11.557426, 48.174154],
            [11.557421, 48.172828],
            [11.555095, 48.172606],
            [11.554095, 48.171579],
            [11.552095, 48.171523],
            [11.551095, 48.170488],
            [11.550095, 48.171416],
            [11.54955, 48.1707],
            [11.547851, 48.170399],
            [11.548481, 48.168768],
            [11.546722, 48.168154],
            [11.54873, 48.167154],
            [11.548095, 48.166439],
            [11.546677, 48.166154],
            [11.547095, 48.164584],
            [11.548095, 48.164422],
            [11.548605, 48.165645],
            [11.549304, 48.165946],
            [11.54971, 48.16754],
            [11.552419, 48.167479],
            [11.552513, 48.162737],
            [11.550396, 48.162455],
            [11.550166, 48.163226],
            [11.549193, 48.163253],
            [11.549095, 48.164105],
            [11.548549, 48.163154],
            [11.549884, 48.162943],
            [11.549949, 48.162154],
            [11.549724, 48.161526],
            [11.548811, 48.161154],
            [11.548845, 48.160154],
            [11.550095, 48.160864],
            [11.556529, 48.160589],
            [11.556739, 48.15751],
            [11.556095, 48.15717],
            [11.55407, 48.157179],
            [11.554001, 48.154154],
            [11.555176, 48.154073],
            [11.555429, 48.15482],
            [11.556095, 48.15493],
            [11.557095, 48.154081],
            [11.558095, 48.154363],
            [11.559045, 48.152154],
            [11.559023, 48.151227],
            [11.558083, 48.151154],
            [11.559018, 48.151078],
            [11.559095, 48.150719],
            [11.559201, 48.152049],
            [11.561994, 48.152053],
            [11.562095, 48.151303],
            [11.56243, 48.151819],
            [11.563937, 48.152313],
            [11.565095, 48.152074],
            [11.568095, 48.152676],
            [11.568965, 48.153154],
            [11.568224, 48.153284],
            [11.568242, 48.154154],
            [11.568434, 48.154815],
            [11.569095, 48.15502],
            [11.569872, 48.154932],
            [11.570095, 48.154513],
            [11.573095, 48.155678],
            [11.575479, 48.15477],
            [11.577095, 48.15523],
            [11.578463, 48.156154],
            [11.578095, 48.156504],
            [11.577998, 48.156252],
            [11.576439, 48.156499],
            [11.576562, 48.157687],
            [11.577863, 48.158154],
            [11.578095, 48.159265],
            [11.57866, 48.159154],
            [11.579169, 48.158154],
            [11.580095, 48.157993],
            [11.580364, 48.158885],
            [11.58118, 48.159069],
            [11.581632, 48.160618],
            [11.582439, 48.161154],
            [11.581785, 48.162464],
            [11.584095, 48.164438],
            [11.585173, 48.164232],
            [11.584737, 48.163154],
            [11.586095, 48.162073],
            [11.587095, 48.163476],
            [11.588095, 48.16313],
            [11.588838, 48.163411],
            [11.589881, 48.165369],
            [11.592493, 48.165154],
            [11.591636, 48.167614],
            [11.593095, 48.168745],
            [11.594404, 48.168845],
            [11.595012, 48.170238],
            [11.596563, 48.170686],
            [11.597095, 48.171267],
            [11.599095, 48.171412],
            [11.598786, 48.169463],
            [11.59804, 48.169099],
            [11.599136, 48.169113],
            [11.599331, 48.169918],
            [11.600222, 48.170154],
            [11.600413, 48.171836],
            [11.600095, 48.172434],
            [11.598625, 48.172685],
            [11.598625, 48.173625],
            [11.603729, 48.17852],
            [11.60447, 48.178529],
            [11.605095, 48.177748],
            [11.606514, 48.177574],
            [11.606908, 48.174341],
            [11.606125, 48.174154],
            [11.607159, 48.174091],
            [11.607397, 48.174852],
            [11.608215, 48.175035],
            [11.609347, 48.176154],
            [11.609095, 48.177846],
            [11.607863, 48.178154],
            [11.608095, 48.179546],
            [11.609045, 48.180205],
            [11.610153, 48.180096],
            [11.61033, 48.180919],
            [11.612566, 48.181154],
            [11.612518, 48.182154],
            [11.613668, 48.183154],
            [11.613095, 48.183692],
            [11.612995, 48.183254],
            [11.611426, 48.183485],
            [11.611645, 48.184604],
            [11.614095, 48.184258],
            [11.615095, 48.1848],
            [11.618095, 48.184915],
            [11.619095, 48.186017],
            [11.621909, 48.186154],
            [11.619956, 48.187016],
            [11.619029, 48.188154],
            [11.618915, 48.191154],
            [11.617678, 48.192154],
            [11.615095, 48.192085],
            [11.614786, 48.191464],
            [11.613883, 48.191154],
            [11.613869, 48.190154],
            [11.613095, 48.189264],
            [11.611542, 48.189601],
            [11.611417, 48.191154],
            [11.610095, 48.191449],
            [11.609498, 48.192154],
            [11.610283, 48.193966],
            [11.61087, 48.194154],
            [11.610627, 48.195154],
            [11.609338, 48.196397],
            [11.604992, 48.194258],
            [11.603517, 48.192732],
            [11.602744, 48.192804],
            [11.602757, 48.193492],
            [11.603503, 48.193746],
            [11.604676, 48.195573],
            [11.605959, 48.196154],
            [11.606418, 48.197831],
            [11.608332, 48.198154],
            [11.607429, 48.199154],
            [11.607477, 48.199773],
            [11.608186, 48.200154],
            [11.607095, 48.200383],
            [11.606095, 48.20175],
            [11.605288, 48.201961],
            [11.604095, 48.201346],
            [11.600986, 48.202045],
            [11.600095, 48.20205],
            [11.599095, 48.201399],
            [11.598604, 48.201663],
            [11.598497, 48.202753],
            [11.599937, 48.202997],
            [11.600095, 48.202421],
            [11.600661, 48.202588],
            [11.601095, 48.204187],
            [11.600095, 48.204927],
            [11.598334, 48.205154],
            [11.598022, 48.206154],
            [11.595095, 48.208502],
            [11.594207, 48.208042],
            [11.59313, 48.20819],
            [11.591601, 48.21066],
            [11.591095, 48.210849],
            [11.590939, 48.210311],
            [11.590095, 48.210283],
            [11.587798, 48.210857],
            [11.588781, 48.213154],
            [11.588248, 48.213307],
            [11.588095, 48.214064],
            [11.587938, 48.213311],
            [11.584095, 48.212807],
            [11.583095, 48.211562],
            [11.581723, 48.211783],
            [11.581095, 48.212591],
            [11.580095, 48.212614],
            [11.579095, 48.211651],
            [11.578095, 48.212642],
            [11.574095, 48.212689],
            [11.573395, 48.211854],
            [11.571095, 48.211739],
            [11.570095, 48.21078],
            [11.569484, 48.212543],
            [11.568095, 48.213738],
            [11.566813, 48.213872],
            [11.566095, 48.214719],
            [11.565095, 48.214732],
            [11.564361, 48.213888],
            [11.563841, 48.2139],
            [11.562698, 48.215154],
            [11.562657, 48.217154],
            [11.563609, 48.218154],
            [11.563375, 48.223154],
            [11.562095, 48.223451],
            [11.561095, 48.224261]
          ]
        ],
        "type": "Polygon"
      },
      "type": "Feature"
    }
  ],
  "type": "FeatureCollection"
}
                })

                map.addSource(`area-pieni`, {
                    'type': 'geojson',
                    'data': 
                    {
  "features": [
    {
      "properties": {
        "fill": "#bf4040",
        "fillOpacity": 0.33,
        "fill-opacity": 0.33,
        "fillColor": "#bf4040",
        "color": "#bf4040",
        "contour": 5000,
        "opacity": 0.33,
        "metric": "distance"
      },
      "geometry": {
        "coordinates": [
          [
            [11.577114, 48.111446],
            [11.576634, 48.113979],
            [11.572110, 48.113979],
            [11.577114, 48.111446]
            ]
        ],
        "type": "Polygon"
      },
      "type": "Feature"
    }
  ],
  "type": "FeatureCollection"
}
                })



                map.addLayer({
                    'id': `area-fill`,
                    'type': 'fill',
                    'source': `area-pieni`,
                    'paint': {
                        'fill-color': `rgba(12, 128, 255, 0.0001)`,
                    }
                });

                map.showTileBoundaries = true;

            for (let i = 2; i > 1; i--) {
                let points = geometric.polygonScaleArea(inputPoints, 1.0);

                map.addSource(`area-${i}`, {
                    'type': 'geojson',
                    'data': {
                        'type': 'Feature',
                        'properties': {},
                        'geometry': {
                            'type': 'LineString',
                            'coordinates': points
                        }
                    }
                });


                map.addLayer({
                    'id': `area-${i}`,
                    'type': 'line',
                    'source': `area-pieni`,
                    'layout': {
                        'line-join': 'miter',
                    },
                    'paint': {
                        'line-color': `rgba(${i * 12}, ${i * 24 + 128}, 255, 1.0)`,
                        'line-width': i === 1 ? 10 : 30,
                        'line-offset': (i - 1) * 60,
                        'line-opacity': (i * 0.4),
                        //'line-dasharray': [0.5, 0.1],
                        //'line-blur': 10,
                        /*
                        'line-width': [
                            'interpolate',
                            ['linear'],
                            ['zoom'],
                            1,
                            1,
                            21,
                            50
                        ]
                        */
                    }
                });
            }

            /*
            map.addSource('mapbox-dem', {
            'type': 'raster-dem',
            'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',
            'tileSize': 512,
            'maxzoom': 14
            });
            // add the DEM source as a terrain layer with exaggerated height
            map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });
            */
        });

        var slider = document.getElementById("rangetest");
        slider.oninput = function() {
            map.setPaintProperty('area-2', 'line-offset', parseInt(this.value));
        }

        var slider2 = document.getElementById("widthtest");
        slider2.oninput = function() {
            map.setPaintProperty('area-2', 'line-width', parseInt(this.value));
        }

    </script>
</body>

</html>